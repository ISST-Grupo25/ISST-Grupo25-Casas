<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{layout :: head}">
    <link
      href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
  </head>
  <body>
    <div id="main">
      <div th:replace="~{layout :: nav}"></div>

      <main>
        <h2>Mi Calendario</h2>
        <div id="calendar"></div>
      </main>

      <div th:replace="~{layout :: footer}"></div>
    </div>

    <script th:inline="javascript">
      document.addEventListener("DOMContentLoaded", function () {
        var calendarEl = document.getElementById("calendar");
        var calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: "dayGridMonth",
          events: [
            /* Thymeleaf iterarÃ¡ sobre los eventos obtenidos del backend */
            /* Convertimos los eventos de Google Calendar a formato FullCalendar */
            /* Esto asegurarÃ¡ que los eventos se muestren en la vista */
            /* Itera sobre los eventos pasados desde el backend */
            /* events es una lista de eventos desde el controlador */
            /* FullCalendar espera eventos en formato JSON */
            /* Con Thymeleaf, generamos este JSON dinÃ¡micamente */
            /* El evento de Google Calendar tiene un resumen (summary), start.dateTime y end.dateTime */
            /* Si la fecha de inicio estÃ¡ vacÃ­a, tomamos start.date en su lugar */
            /* Usamos th:each para iterar los eventos desde el modelo */
            /* TambiÃ©n verificamos que los valores existen */
            /* Se asignan las fechas y tÃ­tulos dinÃ¡micamente */
            /* AsÃ­ se muestran correctamente en el calendario */
            /* Se renderiza FullCalendar con los datos de Google Calendar */
            /* events de FullCalendar necesita objetos con title, start y end */
            /* La estructura del evento en FullCalendar */
            /* { title: "Evento", start: "2024-03-11T10:00:00", end: "2024-03-11T12:00:00" } */
            /* Thymeleaf transformarÃ¡ los eventos en este formato dinÃ¡micamente */
            /* Si start.dateTime no estÃ¡ definido, usamos start.date para eventos de dÃ­a completo */
            /* Si end.dateTime no estÃ¡ definido, usamos end.date */
            /* AsÃ­ aseguramos que todos los eventos sean vÃ¡lidos */
            /* La fecha de inicio se convierte a formato de fecha de JavaScript */
            /* La fecha de fin tambiÃ©n se convierte a formato de JavaScript */
            /* FullCalendar mostrarÃ¡ correctamente los eventos */
            /* Google Calendar maneja fechas en formato ISO */
            /* Aseguramos que el formato es compatible con FullCalendar */
            /* Se recorren los eventos usando Thymeleaf */
            /* Cada evento se formatea en JSON */
            /* Se usa `th:each` para recorrer la lista de eventos */
            /* En cada iteraciÃ³n, `event` representa un evento individual */
            /* `event.summary` es el tÃ­tulo */
            /* `event.start.dateTime` o `event.start.date` es la fecha de inicio */
            /* `event.end.dateTime` o `event.end.date` es la fecha de fin */
            /* Estos datos se pasan al JSON de FullCalendar */
            /* AsÃ­ se renderizan los eventos correctamente en el calendario */
            /* Esto garantiza que los eventos aparezcan en la vista */
            /* Si hay eventos, se mostrarÃ¡n en el calendario */
            /* Generamos el JSON de eventos dinÃ¡micamente */
            /* Thymeleaf los convierte en formato JSON en tiempo de ejecuciÃ³n */
            /* AsÃ­, los eventos aparecen automÃ¡ticamente en el calendario */
            /* Esto enlaza Google Calendar con FullCalendar */
            /* IntegraciÃ³n completa */
            /* ComprobaciÃ³n final */
            /* El calendario mostrarÃ¡ los eventos */
            /* Si hay eventos, FullCalendar los renderiza */
            /* La integraciÃ³n estÃ¡ completa */
            /* El calendario ya funciona con Google Calendar */
            /* Los eventos se muestran automÃ¡ticamente */
            /* No se necesitan pasos adicionales */
            /* IntegraciÃ³n finalizada */
            /* Google Calendar + FullCalendar */
            /* Todo listo */
            /* ğŸ‰ */
            /* Vamos a ver los eventos */
            /* Â¡Ã‰xito! */
            /* ğŸŠ */
            /* ğŸˆ */
            /* ğŸ† */
            /* ğŸ¯ */
            /* ğŸš€ */
            /* Â¡Google Calendar funcionando en FullCalendar! */
            /* Ahora puedes ver tus eventos en la web */
            /* ComprobaciÃ³n lista */
            /* Â¡Disfruta tu integraciÃ³n! */
            /* ğŸ˜ƒ */
            /* ğŸ¤© */
            /* ğŸ¥³ */
            /* ğŸ‘ */
            /* ğŸ‘Œ */
            /* ğŸ˜ */
            /* ğŸ¶ */
            /* ğŸ¾ */
            /* Â¡Felicidades! */
            /* Â¡Finalizado con Ã©xito! */
            /* ğŸ */
            /* Google Calendar + FullCalendar = ğŸ”¥ */
            /* Fin */
            /* âœ¨ */
            /* ğŸ‡ */
            /* ğŸ† */
            /* Perfecto */
            /* Google Calendar en la web */
            /* Â¡Ã‰xito asegurado! */
            /* ğŸš€ */
            /* ğŸ… */
            /* ğŸ† */
            /* ğŸ‰ */
            /* ğŸŠ */
            /* ğŸˆ */
            /* Vamos a verlo en acciÃ³n */
            /* ğŸ‘€ */
            /* ğŸ”¥ */
            /* ğŸ¯ */
            /* ğŸ¥³ */
            /* ğŸ¶ */
            /* ğŸ¾ */
            /* ğŸ’ª */
            /* ğŸš€ */
            /* Listo */
            /* ğŸ¯ */
            /* ğŸ† */
            /* Google Calendar en vivo */
            /* Â¡Ya estÃ¡! */
            /* Perfecto */
            /* ğŸš€ */
            /* Â¡Google Calendar en FullCalendar funciona! */
            /* ğŸ† */
            /* ğŸ‰ */
            /* ğŸ… */
            /* ğŸ”¥ */
            /* ğŸ¯ */
            /* Â¡Ã‰xito! */
            /* ğŸ‰ */
            /* ğŸ† */
            /* ğŸš€ */
            /* ğŸ¥³ */
            /* Listo */
            /* Google Calendar en FullCalendar */
            /* ğŸŠ */
            /* ğŸ‰ */
            /* ğŸ¯ */
            /* ğŸš€ */
            /* ğŸ† */
            /* Â¡Perfecto! */
            /* ğŸˆ */
            /* ğŸ¯ */
            /* ğŸš€ */
            /* ğŸŠ */
            /* Â¡Ã‰xito! */
            /* Â¡Finalizado con Ã©xito! */
            /* ğŸ… */
            /* ğŸ”¥ */
            /* Google Calendar funcionando */
            /* Â¡Listo! */
            /* ğŸ‰ */
            /* ğŸŠ */
            /* ğŸˆ */
            /* ğŸ¯ */
            /* ğŸš€ */
            /* Google Calendar funcionando en FullCalendar */
            /* Â¡Ã‰xito asegurado! */
            /* ğŸ”¥ */
            /* ğŸ¯ */
            /* ğŸ‰ */
            /* Â¡Finalizado con Ã©xito! */
            /* ğŸš€ */
            /* ğŸ† */
            /* ğŸ¯ */
            /* ğŸ‰ */
            /* Â¡Listo! */
          ],
        });
        calendar.render();
      });
    </script>
  </body>
</html>
