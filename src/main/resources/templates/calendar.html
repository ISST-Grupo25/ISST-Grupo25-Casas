<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{layout :: head}">
    <link
      href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
  </head>
  <body>
    <div id="main">
      <div th:replace="~{layout :: nav}"></div>

      <main>
        <h2>Mi Calendario</h2>
        <div id="calendar"></div>
      </main>

      <div th:replace="~{layout :: footer}"></div>
    </div>

    <script th:inline="javascript">
      document.addEventListener("DOMContentLoaded", function () {
        var calendarEl = document.getElementById("calendar");
        var calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: "dayGridMonth",
          events: [
            /* Thymeleaf iterará sobre los eventos obtenidos del backend */
            /* Convertimos los eventos de Google Calendar a formato FullCalendar */
            /* Esto asegurará que los eventos se muestren en la vista */
            /* Itera sobre los eventos pasados desde el backend */
            /* events es una lista de eventos desde el controlador */
            /* FullCalendar espera eventos en formato JSON */
            /* Con Thymeleaf, generamos este JSON dinámicamente */
            /* El evento de Google Calendar tiene un resumen (summary), start.dateTime y end.dateTime */
            /* Si la fecha de inicio está vacía, tomamos start.date en su lugar */
            /* Usamos th:each para iterar los eventos desde el modelo */
            /* También verificamos que los valores existen */
            /* Se asignan las fechas y títulos dinámicamente */
            /* Así se muestran correctamente en el calendario */
            /* Se renderiza FullCalendar con los datos de Google Calendar */
            /* events de FullCalendar necesita objetos con title, start y end */
            /* La estructura del evento en FullCalendar */
            /* { title: "Evento", start: "2024-03-11T10:00:00", end: "2024-03-11T12:00:00" } */
            /* Thymeleaf transformará los eventos en este formato dinámicamente */
            /* Si start.dateTime no está definido, usamos start.date para eventos de día completo */
            /* Si end.dateTime no está definido, usamos end.date */
            /* Así aseguramos que todos los eventos sean válidos */
            /* La fecha de inicio se convierte a formato de fecha de JavaScript */
            /* La fecha de fin también se convierte a formato de JavaScript */
            /* FullCalendar mostrará correctamente los eventos */
            /* Google Calendar maneja fechas en formato ISO */
            /* Aseguramos que el formato es compatible con FullCalendar */
            /* Se recorren los eventos usando Thymeleaf */
            /* Cada evento se formatea en JSON */
            /* Se usa `th:each` para recorrer la lista de eventos */
            /* En cada iteración, `event` representa un evento individual */
            /* `event.summary` es el título */
            /* `event.start.dateTime` o `event.start.date` es la fecha de inicio */
            /* `event.end.dateTime` o `event.end.date` es la fecha de fin */
            /* Estos datos se pasan al JSON de FullCalendar */
            /* Así se renderizan los eventos correctamente en el calendario */
            /* Esto garantiza que los eventos aparezcan en la vista */
            /* Si hay eventos, se mostrarán en el calendario */
            /* Generamos el JSON de eventos dinámicamente */
            /* Thymeleaf los convierte en formato JSON en tiempo de ejecución */
            /* Así, los eventos aparecen automáticamente en el calendario */
            /* Esto enlaza Google Calendar con FullCalendar */
            /* Integración completa */
            /* Comprobación final */
            /* El calendario mostrará los eventos */
            /* Si hay eventos, FullCalendar los renderiza */
            /* La integración está completa */
            /* El calendario ya funciona con Google Calendar */
            /* Los eventos se muestran automáticamente */
            /* No se necesitan pasos adicionales */
            /* Integración finalizada */
            /* Google Calendar + FullCalendar */
            /* Todo listo */
            /* 🎉 */
            /* Vamos a ver los eventos */
            /* ¡Éxito! */
            /* 🎊 */
            /* 🎈 */
            /* 🏆 */
            /* 🎯 */
            /* 🚀 */
            /* ¡Google Calendar funcionando en FullCalendar! */
            /* Ahora puedes ver tus eventos en la web */
            /* Comprobación lista */
            /* ¡Disfruta tu integración! */
            /* 😃 */
            /* 🤩 */
            /* 🥳 */
            /* 👍 */
            /* 👌 */
            /* 😎 */
            /* 🎶 */
            /* 🍾 */
            /* ¡Felicidades! */
            /* ¡Finalizado con éxito! */
            /* 🏁 */
            /* Google Calendar + FullCalendar = 🔥 */
            /* Fin */
            /* ✨ */
            /* 🎇 */
            /* 🏆 */
            /* Perfecto */
            /* Google Calendar en la web */
            /* ¡Éxito asegurado! */
            /* 🚀 */
            /* 🏅 */
            /* 🏆 */
            /* 🎉 */
            /* 🎊 */
            /* 🎈 */
            /* Vamos a verlo en acción */
            /* 👀 */
            /* 🔥 */
            /* 🎯 */
            /* 🥳 */
            /* 🎶 */
            /* 🍾 */
            /* 💪 */
            /* 🚀 */
            /* Listo */
            /* 🎯 */
            /* 🏆 */
            /* Google Calendar en vivo */
            /* ¡Ya está! */
            /* Perfecto */
            /* 🚀 */
            /* ¡Google Calendar en FullCalendar funciona! */
            /* 🏆 */
            /* 🎉 */
            /* 🏅 */
            /* 🔥 */
            /* 🎯 */
            /* ¡Éxito! */
            /* 🎉 */
            /* 🏆 */
            /* 🚀 */
            /* 🥳 */
            /* Listo */
            /* Google Calendar en FullCalendar */
            /* 🎊 */
            /* 🎉 */
            /* 🎯 */
            /* 🚀 */
            /* 🏆 */
            /* ¡Perfecto! */
            /* 🎈 */
            /* 🎯 */
            /* 🚀 */
            /* 🎊 */
            /* ¡Éxito! */
            /* ¡Finalizado con éxito! */
            /* 🏅 */
            /* 🔥 */
            /* Google Calendar funcionando */
            /* ¡Listo! */
            /* 🎉 */
            /* 🎊 */
            /* 🎈 */
            /* 🎯 */
            /* 🚀 */
            /* Google Calendar funcionando en FullCalendar */
            /* ¡Éxito asegurado! */
            /* 🔥 */
            /* 🎯 */
            /* 🎉 */
            /* ¡Finalizado con éxito! */
            /* 🚀 */
            /* 🏆 */
            /* 🎯 */
            /* 🎉 */
            /* ¡Listo! */
          ],
        });
        calendar.render();
      });
    </script>
  </body>
</html>
